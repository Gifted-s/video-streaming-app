(this["webpackJsonpvideo-streaming-client"]=this["webpackJsonpvideo-streaming-client"]||[]).push([[0],{27:function(e,t,a){},35:function(e,t,a){},36:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(20),i=a.n(c),s=(a(27),a(11)),o=a(2),l=a(9),d=a(10),u=a(13),p=a(12),m=a(1),j=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){return Object(m.jsx)("div",{className:"App App-header",children:Object(m.jsx)("div",{className:"container",children:Object(m.jsx)("div",{className:"row justify-content-center align-items-center",children:Object(m.jsx)(s.b,{to:"/player/0",children:Object(m.jsx)("div",{className:"card border-0",children:Object(m.jsx)("div",{className:"card-body",children:Object(m.jsx)("div",{className:"btn btn-primary",children:"Begin Stream"})})})})})})})}}]),a}(n.Component),h=a(18),v=a.n(h),O=a(22),b={PROENDOINT:"https://ecosystem-streaming-server.herokuapp.com",DEVENDPOINT:"http://localhost:4000"};var f=function(){return Object(m.jsx)("footer",{children:"\xa9 2021, Ecosystem.inc"})};var g=function(){return Object(m.jsx)("header",{children:"Ecosystem Technical Assignment"})},y=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(e){var n;Object(l.a)(this,a),n=t.call(this,e);var r=JSON.parse(localStorage.getItem("playing"));return n.state={videoId:n.props.match.params.id,videoData:{},previoustime:r&&r.id===n.getParamsId()?r.time:0},n}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=Object(O.a)(v.a.mark((function e(){var t,a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("atrt sgsin"),e.next=4,fetch("".concat(b.PROENDOINT,"/video/").concat(this.state.videoId,"/data"));case 4:return t=e.sent,e.next=7,t.json();case 7:a=e.sent,this.setState({videoData:a}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,this,[[0,11]])})));return function(){return e.apply(this,arguments)}}()},{key:"getParamsId",value:function(){return parseInt(this.props.match.params.id)}},{key:"calculatePlaybackTime",value:function(e){var t=JSON.parse(localStorage.getItem("playing"));return t&&t.time>=8?Math.floor(e/1e3+this.state.previoustime)-8:Math.floor(e/1e3+this.state.previoustime)}},{key:"render",value:function(){var e=this;return Object(m.jsxs)("div",{className:"App",children:[Object(m.jsx)(g,{}),Object(m.jsxs)("header",{className:"App-header",children:[Object(m.jsx)("video",{onLoadStartCapture:function(){e.player.currentTime=e.state.previoustime},onTimeUpdate:function(t){e.player.currentTime>=e.player.duration&&(localStorage.setItem("playing",JSON.stringify({id:e.getParamsId(),time:0})),e.setState({previoustime:0})),localStorage.setItem("playing",JSON.stringify({id:e.getParamsId(),time:e.calculatePlaybackTime(t.timeStamp)}))},ref:function(t){e.player=t},controls:!0,crossOrigin:"anonymous",children:Object(m.jsx)("source",{src:"".concat(b.PROENDOINT,"/video/").concat(this.state.videoId),type:"video/mp4"})}),Object(m.jsx)("h4",{children:this.state.videoData.name})]}),Object(m.jsx)(f,{})]})}}]),a}(n.Component);a(35);var x=function(){return Object(m.jsx)(s.a,{children:Object(m.jsxs)(o.c,{children:[Object(m.jsx)(o.a,{exact:!0,path:"/",component:j}),Object(m.jsx)(o.a,{path:"/player/:id",component:y})]})})},N=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,37)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,c=t.getLCP,i=t.getTTFB;a(e),n(e),r(e),c(e),i(e)}))};i.a.render(Object(m.jsx)(r.a.StrictMode,{children:Object(m.jsx)(x,{})}),document.getElementById("root")),N()}},[[36,1,2]]]);
//# sourceMappingURL=main.4f05472b.chunk.js.map